{
  "dashboard": {
    "id": null,
    "uid": null,
    "title": "Backend Metrics",
    "tags": ["sre-app", "backend"],
    "timezone": "browser",
    "schemaVersion": 36,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "type": "row",
        "title": "Requests",
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
        "collapsed": false,
        "panels": []
      },
      {
        "type": "stat",
        "title": "Total Requests",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "sum(requests_total)",
          "legendFormat": "Total Requests"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 0, "y": 1},
        "fieldConfig": {"defaults": {"unit": "none"}}
      },
      {
        "type": "stat",
        "title": "Requests by Endpoint",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "sum by (endpoint) (requests_by_endpoint)",
          "legendFormat": "{{endpoint}}"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 6, "y": 1},
        "fieldConfig": {"defaults": {"unit": "none"}}
      },
      {
        "type": "row",
        "title": "Errors",
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 5},
        "collapsed": false,
        "panels": []
      },
      {
        "type": "stat",
        "title": "Total Errors",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "sum(errors_total)",
          "legendFormat": "Total Errors"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 0, "y": 6},
        "fieldConfig": {"defaults": {"unit": "none"}}
      },
      {
        "type": "barchart",
        "title": "Errors by Status Code",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "sum by (code) (errors_by_status_code)",
          "legendFormat": "{{code}}"
        }],
        "gridPos": {"h": 8, "w": 12, "x": 6, "y": 6},
        "fieldConfig": {"defaults": {"unit": "none"}}
      },
      {
        "type": "row",
        "title": "Performance",
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 14},
        "collapsed": false,
        "panels": []
      },
      {
        "type": "stat",
        "title": "Average Response Time (ms)",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "avg(response_time_avg)",
          "legendFormat": "Avg Response Time"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 0, "y": 15},
        "fieldConfig": {"defaults": {"unit": "ms"}}
      },
      {
        "type": "stat",
        "title": "Uptime (s)",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "max(uptime_seconds)",
          "legendFormat": "Uptime"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 6, "y": 15},
        "fieldConfig": {"defaults": {"unit": "s"}}
      },
      {
        "type": "stat",
        "title": "Memory Usage (MB)",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "avg(memory_usage_mb)",
          "legendFormat": "Memory Usage"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 12, "y": 15},
        "fieldConfig": {"defaults": {"unit": "megabytes"}}
      },
      {
        "type": "stat",
        "title": "CPU Usage (%)",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "avg(cpu_percent)",
          "legendFormat": "CPU Usage"
        }],
        "gridPos": {"h": 4, "w": 6, "x": 18, "y": 15},
        "fieldConfig": {"defaults": {"unit": "percent"}}
      },
      {
        "type": "row",
        "title": "Application Info",
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 19},
        "collapsed": false,
        "panels": []
      },
      {
        "type": "table",
        "title": "App Info",
        "datasource": "Prometheus",
        "targets": [{
          "expr": "app_info",
          "legendFormat": "Worker: {{worker_id}}, Storage: {{storage}}"
        }],
        "gridPos": {"h": 6, "w": 24, "x": 0, "y": 20},
        "fieldConfig": {"defaults": {"unit": "none"}}
      }
    ],
    "templating": {"list": []},
    "annotations": {"list": []}
  },
  "overwrite": true
}
